window.__require=function t(e,i,a){function n(s,h){if(!i[s]){if(!e[s]){var r=s.split("/");if(r=r[r.length-1],!e[r]){var c="function"==typeof __require&&__require;if(!h&&c)return c(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var d=i[s]={exports:{}};e[s][0].call(d.exports,function(t){return n(e[s][1][t]||t)},d,d.exports,t,e,i,a)}return i[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<a.length;s++)n(a[s]);return n}({GamePage:[function(t,e){"use strict";cc._RF.push(e,"b03b0f39thLeK/JhTK4f7R7","GamePage"),cc.Class({extends:cc.Component,properties:{array:{type:Array,default:[]}},onLoad:function(){this.node.getChildByName("dialog").active=!1,this.node.getChildByName("fail").active=!1;var t=cc.sys.localStorage.getItem("current_level");t||(t=1),this.node.getChildByName("currentLevel").getComponent(cc.Label).string=t,this.array=[[0,0],[0,0]],this.node.on(cc.Node.EventType.TOUCH_START,function(t){this.array[0]=[t.getLocationX(),t.getLocationY()]},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){this.array[1]=[t.getLocationX(),t.getLocationY()],this.node.getChildByName("me").getComponent("me").caculate(this.array)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(){this.node.getChildByName("me").getComponent("me").shoot()},this)},start:function(){},onClick:function(){cc.director.loadScene("HomePage")},nextLevel:function(){var t=cc.sys.localStorage.getItem("current_level");t||(t=1),cc.sys.localStorage.setItem("current_level",parseInt(t)+1),cc.director.loadScene("GamePage")},replay:function(){cc.sys.localStorage.setItem("current_level",1),cc.director.loadScene("GamePage")},update:function(){!0!==this.node.getChildByName("dialog").active&&!0!==this.node.getChildByName("fail").active||(this.node.getChildByName("me").pauseSystemEvents(!0),this.node.getChildByName("enemy").pauseSystemEvents(!0))}}),cc._RF.pop()},{}],HomePage:[function(t,e){"use strict";cc._RF.push(e,"b5a658cQ1ZNSIY+xc5HYykg","HomePage"),cc.Class({extends:cc.Component,properties:{playButton:cc.Button,i:0},onLoad:function(){cc.sys.localStorage.setItem("current_level",1),this.button=this.node.getChildByName("playButton")},start:function(){},onClick:function(){clearInterval(this.interval),cc.director.loadScene("GamePage")},update:function(){this.i%30<=15?this.button.scale=1:this.button.scale=.9,this.i++}}),cc._RF.pop()},{}],arrow:[function(t,e){"use strict";cc._RF.push(e,"f7c5dVhDuNPTYFCkjTJlt27","arrow"),cc.Class({extends:cc.Component,properties:{is_move:!1,i:0,g:.1,angle:0,speed:15},onLoad:function(){"arrow"!==this.node.name&&(cc.director.getCollisionManager().enabled=!0,this.me=this.node.getParent(),this.canvas=this.me.getParent(),"me"===this.me.name?this.enemy=this.canvas.getChildByName("enemy"):"enemy"===this.me.name&&(this.enemy=this.canvas.getChildByName("me")),this.headShoot=this.enemy.getChildByName("headShoot"))},set_position:function(){var t=this.node.x,e=this.node.y,i=this.angle,a=Math.sqrt(t*t+e*e),n=180*Math.atan(e/t)/Math.PI+i;"enemy"===this.me.name?(this.node.y=a*Math.sin((180+n)*Math.PI/180),this.node.x=a*Math.cos((180+n)*Math.PI/180)):"me"===this.me.name&&(this.node.y=a*Math.sin(n*Math.PI/180),this.node.x=a*Math.cos(n*Math.PI/180))},start:function(){"arrow"!==this.node.name&&this.set_position()},caculate_path:function(t,e,i){var a=t*Math.PI/180,n=i*Math.tan(a)-this.g*i*i/(2*Math.cos(a)*Math.cos(a)*e*e);return[this.node.x+i,this.node.y+n]||[this.node.x,this.node.y]},caculate_angle:function(t,e,i){var a=t*Math.PI/180,n=Math.tan(a)-this.g*i/(Math.cos(a)*Math.cos(a)*e*e);return 180*Math.atan(n)/Math.PI},onCollisionEnter:function(t,e){"arrow"!==t.node.name&&"arrow"!==e.node.name&&!0!==this.canvas.getChildByName("dialog").active&&!0!==this.canvas.getChildByName("fail").active&&(this.is_move=!1,t.node.group.indexOf("head")>=0?(cc.log("===\u7206\u5934==="),this.enemy.getComponent(this.enemy.name).blood-=101,this.enemy.getChildByName("blood").getComponent("blood").decrease(101),this.headShoot.active=!0):t.node.group.indexOf("body")>=0&&(this.enemy.getComponent(this.enemy.name).blood-=51,this.enemy.getChildByName("blood").getComponent("blood").decrease(51)))},onCollisionStay:function(){},onCollisionExit:function(){},update:function(){if(this.is_move){var t=this.caculate_path(this.angle,this.speed,this.i/2),e=this.caculate_angle(this.angle,this.speed,this.i/2);this.node.x=t[0],this.node.y=t[1],this.node.angle=e,"me"==this.me.name?(this.i+=1,this.i>=150&&(this.is_move=!1)):"enemy"===this.me.name&&(this.i-=1,this.i<=-150&&(this.is_move=!1))}}}),cc._RF.pop()},{}],blood:[function(t,e){"use strict";cc._RF.push(e,"bcefa1HwxtPU6WG+4oY6nOq","blood"),cc.Class({extends:cc.Component,properties:{blood:100},onLoad:function(){this.node.getChildByName("leftBlood").width=this.blood},start:function(){},decrease:function(t){this.blood-=t,this.blood<=0&&(this.blood=0),this.node.getChildByName("leftBlood").width=this.blood}}),cc._RF.pop()},{}],enemy:[function(t,e){"use strict";cc._RF.push(e,"0aa7aXMu4ZC4qbQo3Ea1JD4","enemy"),cc.Class({extends:cc.Component,properties:{blood:100,prefabBlood:cc.Prefab,prefabHeadShoot:cc.Prefab},onLoad:function(){"enemy"===this.node.name&&(this.node.x=Math.floor(-400*Math.random()+300),this.node.y=Math.floor(-350*Math.random()+250),this.node.scale=-.7*Math.random()+1),this.prefabBlood=cc.instantiate(this.prefabBlood),this.node.addChild(this.prefabBlood),this.prefabHeadShoot=cc.instantiate(this.prefabHeadShoot),this.node.addChild(this.prefabHeadShoot),this.me=this.node,this.rotatePart=this.me.getChildByName("rotatePart"),this.dragPart=this.rotatePart.getChildByName("dragPart"),this.arrow=this.dragPart.getChildByName("arrow"),this.upLine=this.rotatePart.getChildByName("upLine"),this.downLine=this.rotatePart.getChildByName("downLine")},start:function(){var t=this;t.angle=t.get_angle(),t.distance=t.get_distance(),t.rotatePart.angle=t.angle-15;var e=0,i=setInterval(function(){t.dragPart.x=t.dragPart.x+t.distance/100,t.upLine.angle+=t.distance/100,t.downLine.angle-=t.distance/100,t.upLine.height+=t.distance/200,t.downLine.height+=t.distance/200,++e>=10&&(clearInterval(i),t.shoot())},100)},get_angle:function(){var t=this.node.x+300,e=this.node.y+50,i=(this.node.x,this.node.y+250),a=Math.atan(e/t),n=Math.atan(i/i);return 360*(Math.random()*(a-n)+n)/(2*Math.PI)},get_distance:function(){return Math.floor(-40*Math.random()+200)},shoot:function(){var t=cc.instantiate(this.arrow);t.name="arrow_copy",this.me.addChild(t),t.getComponent("arrow").angle=this.rotatePart.angle,t.getComponent("arrow").speed=this.distance/10,t.getComponent("arrow").is_move=!0,this.fresh()},fresh:function(){var t=this;t.dragPart.x=0,t.upLine.angle=15,t.downLine.angle=-15,t.upLine.height=45,t.downLine.height=45,!1===t.node.getParent().getChildByName("dialog").active&&!1===t.node.getParent().getChildByName("fail").active&&setTimeout(function(){t.start()},1e3)},update:function(){this.blood<=0&&(this.node.getParent().getChildByName("dialog").active=!0,this.blood=100)}}),cc._RF.pop()},{}],headShoot:[function(t,e){"use strict";cc._RF.push(e,"08d44zvLKhPlIcc+55pYixF","headShoot"),cc.Class({extends:cc.Component,properties:{i:0,y:130},onLoad:function(){this.node.active=!1},start:function(){},update:function(){this.node.y+=2,this.i+=1,50===this.i&&(this.node.y=this.y,this.i=0,this.node.active=!1)}}),cc._RF.pop()},{}],me:[function(t,e){"use strict";cc._RF.push(e,"aca74FXLbdOf5aMqeNkBbfz","me"),cc.Class({extends:cc.Component,properties:{blood:100,prefabBlood:cc.Prefab,prefabHeadShoot:cc.Prefab},onLoad:function(){this.me=this.node,this.rotatePart=this.me.getChildByName("rotatePart"),this.dragPart=this.rotatePart.getChildByName("dragPart"),this.arrow=this.dragPart.getChildByName("arrow"),this.upLine=this.rotatePart.getChildByName("upLine"),this.downLine=this.rotatePart.getChildByName("downLine"),this.prefabBlood=cc.instantiate(this.prefabBlood),this.node.addChild(this.prefabBlood),this.prefabHeadShoot=cc.instantiate(this.prefabHeadShoot),this.node.addChild(this.prefabHeadShoot)},caculate:function(t){this.angle=this.get_angle(t[0],t[1]),this.distance=this.get_distance(t[0],t[1]),this.rotatePart.angle=this.angle+15,this.dragPart.x=0,this.distance>=200&&(this.distance=200),this.dragPart.x=this.dragPart.x-this.distance/10,this.upLine.angle=-15-this.distance/10,this.downLine.angle=15+this.distance/10,this.upLine.height=45+this.distance/20,this.downLine.height=45+this.distance/20},get_angle:function(t,e){var i=e[0]-t[0],a=e[1]-t[1];return 360*Math.atan(a/i)/(2*Math.PI)},get_distance:function(t,e){var i=e[0]-t[0],a=e[1]-t[1];return Math.sqrt(a*a+i*i)},shoot:function(){var t=cc.instantiate(this.arrow);t.name="arrow_copy",this.me.addChild(t),t.getComponent("arrow").angle=this.rotatePart.angle,t.getComponent("arrow").speed=this.distance/10,t.getComponent("arrow").is_move=!0,this.fresh()},fresh:function(){this.dragPart.x=0,this.upLine.angle=-15,this.downLine.angle=15,this.upLine.height=45,this.downLine.height=45},update:function(){this.blood<=0&&(this.node.getParent().getChildByName("fail").active=!0,this.blood=100)}}),cc._RF.pop()},{}]},{},["GamePage","HomePage","arrow","blood","enemy","headShoot","me"]);